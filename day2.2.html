<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Day 2.2 - VPS è‡ªåŠ¨åŒ–å®‰å…¨é˜²çº¿</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.6; color: #333; max-width: 800px; margin: 0 auto; padding: 40px 20px; background-color: #f0f2f5; }
        .log-container { background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        
        /* å¯¼èˆªå¤´éƒ¨ */
        .header { display: flex; align-items: center; justify-content: space-between; border-bottom: 2px solid #3498db; padding-bottom: 15px; margin-bottom: 25px; }
        .back-link { text-decoration: none; color: #3498db; font-weight: bold; font-size: 0.9em; }
        h1 { color: #2c3e50; margin: 0; font-size: 1.5em; }

        /* å†…å®¹æ¿å— */
        .section { margin-bottom: 30px; }
        .section h2 { font-size: 1.2em; color: #3498db; border-left: 5px solid #3498db; padding-left: 10px; margin-bottom: 15px; }
        
        /* çŠ¶æ€å±•ç¤º */
        .status-box { padding: 15px; border-radius: 8px; margin: 15px 0; font-size: 0.9em; }
        .warning { background: #fffaf0; border: 1px solid #fbd38d; color: #9c4221; }
        .success { background: #f0fff4; border: 1px solid #9ae6b4; color: #276745; }
        .tip { background: #ebf8ff; border: 1px solid #90cdf4; color: #2c5282; }

        /* ä»£ç å±•ç¤º */
        pre { background: #2d3436; color: #dfe6e9; padding: 15px; border-radius: 6px; overflow-x: auto; font-size: 0.85em; }
        code { font-family: 'Consolas', monospace; }
        
        .footer { text-align: center; margin-top: 40px; color: #999; font-size: 0.8em; }
    </style>
</head>
<body>
    <div class="log-container">
        <div class="header">
            <h1>ğŸš¨ VPS SSH ç™»å½•æŠ¥è­¦ç³»ç»Ÿ</h1>
            <a href="index.html" class="back-link">â† è¿”å›ä¸»é¡µ</a>
        </div>

        <div class="section">
            <h2>1. å·¥å…·é“¾æ­å»ºï¼šmsmtp + Resend</h2>
            <p>ä¸ºäº†è®© VPS å…·å¤‡â€œè¯´è¯â€çš„èƒ½åŠ›ï¼Œæˆ‘é€‰æ‹©äº†è½»é‡çº§çš„ <b>msmtp</b> ä½œä¸ºå‘ä¿¡ä»£ç†ã€‚åœ¨å®‰è£…è¿‡ç¨‹ä¸­ï¼Œä¸ºäº†é¿å…ä¸å¿…è¦çš„æƒé™é˜»å¡ï¼Œæˆ‘é€‰æ‹©äº†è·³è¿‡ AppArmor é…ç½®ã€‚</p>
            <div class="tip">
                <strong>å…³é”®é…ç½®ï¼š</strong> å¿…é¡»åœ¨ <code>~/.msmtprc</code> ä¸­æ­£ç¡®å¡«å…¥ Resend çš„ API Keyï¼Œå¹¶è®¾ç½®æƒé™ä¸º <code>600</code>ï¼Œå¦åˆ™ç³»ç»Ÿä¼šå‡ºäºå®‰å…¨åŸå› æ‹’ç»è¯»å–ã€‚
            </div>
        </div>

        <div class="section">
            <h2>2. è‡ªåŠ¨åŒ–è„šæœ¬ï¼šç™»å½•å³æŠ¥è­¦</h2>
            <p>é€šè¿‡åœ¨ <code>/etc/profile.d/</code> ç›®å½•ä¸‹ç¼–å†™ Shell è„šæœ¬ï¼Œå®ç°äº†æ¯æ¬¡ SSH ç™»å½•è‡ªåŠ¨è§¦å‘é‚®ä»¶é€šçŸ¥ã€‚</p>
            <pre><code># æ ¸å¿ƒå‘ä¿¡é€»è¾‘
printf "To: root@vps.yushenchuanmei.top\nSubject: ğŸš¨ SSH ç™»å½•æé†’: $USER è®¿é—®äº† VPS\n\næ—¶é—´: $LOGIN_DATE\næ¥æº IP: $LOGIN_IP" | msmtp root@vps.yushenchuanmei.top</code></pre>
        </div>

        <div class="section">
            <h2>3. æ’éšœå†ç¨‹ï¼šä» Bounced åˆ° Success</h2>
            <p>é…ç½®è¿‡ç¨‹å¹¶éä¸€å¸†é£é¡ºï¼Œæˆ‘é‡åˆ°äº†ä¸¤ä¸ªå…¨æ ˆå¼€å‘ä¸­éå¸¸ç»å…¸çš„â€œå‘â€ï¼š</p>
            <ul>
                <li><b>SMTP 450 é”™è¯¯</b>ï¼šç”±äºé‚®ä»¶å¤´ç¼ºå°‘å¿…è¦çš„æ¢è¡Œç¬¦ï¼ŒResend æŠ¥é”™ <i>"The 'to' field must be a 'string'"</i>ã€‚é€šè¿‡æ”¹ç”¨ <code>printf</code> ä¸¥æ ¼æ§åˆ¶æ ¼å¼è§£å†³ã€‚</li>
                <li><b>æŠ‘åˆ¶åˆ—è¡¨ (Suppression List)</b>ï¼šç”±äºæœ€åˆæ²¡å¼€é€š Cloudflare çš„ Catch-all åŠŸèƒ½å¯¼è‡´é€€ä¿¡ï¼ŒResend è‡ªåŠ¨å°†æˆ‘çš„é‚®ç®±å°é”ã€‚æ‰‹åŠ¨ä» <b>Suppression List</b> ç§»é™¤åæ‰æ¢å¤æ­£å¸¸ã€‚</li>
            </ul>
        </div>

        <div class="section">
            <h2>4. æœ€ç»ˆæˆæœ</h2>
            <div class="status-box success">
                <strong>è¾¾æˆï¼š</strong> ç°åœ¨æ¯å½“æœ‰è¿œç¨‹è®¿é—®æ—¶ï¼Œæˆ‘çš„æ‰‹æœºéƒ½ä¼šç«‹åˆ»æ”¶åˆ°æ¥è‡ª <code>admin@yushenchuanmei.top</code> çš„è¯¦ç»†æŠ¥è­¦é‚®ä»¶ã€‚
            </div>
            <p>è¿™å¥—ç³»ç»Ÿåˆ©ç”¨äº† Cloudflare é‚®ä»¶è·¯ç”±ã€Resend SMTP ä»¥åŠ Linux ç³»ç»Ÿè„šæœ¬ï¼Œæ„å»ºäº†ä¸€é“åšå®çš„è¿ç»´é˜²çº¿ã€‚</p>
        </div>

        <div class="footer">
            <p>è®°å½•æ—¥æœŸ: 2025å¹´12æœˆ29æ—¥ | è¿ç»´æ”¯æŒ: root@lhy-vps</p>
        </div>
    </div>
</body>
</html>
